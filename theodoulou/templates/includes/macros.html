{% macro render_node(node) %}
<ul class="tree">
    {% for name, data in node.items() %}
    <li>
        {% if data.children %}
        <span class="caret">{{ name }}</span>
        {% else %}
        <a href="/pc/models/types/vehicle/products?node_id={{ data.id }}">{{ name }}</a>
        {% endif %}
        {% if data.children %}
        {{ render_node(data.children) }}
        {% endif %}
    </li>
    {% endfor %}
</ul>
{% endmacro %}

{% macro render_pagination(link, page, last_page) %}
{% if last_page and last_page > 1 %}
<nav aria-label="Page navigation">
    <ul class="pagination">
        <!-- Link to the first page -->
        <li class="page-item {% if page == 1 %}disabled{% endif %}">
            <a class="page-link" href="{{ link }}&page=1" aria-label="First">
                <span aria-hidden="true">&laquo;&laquo;</span>
            </a>
        </li>

        <!-- Link to the previous page -->
        <li class="page-item {% if page == 1 %}disabled{% endif %}">
            <a class="page-link" href="{{ link }}&page={{ page - 1 }}" aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
            </a>
        </li>

        <!-- If there are pages before the ones currently shown -->
        {% if page - 2 > 1 %}
        <li class="page-item disabled">
            <a class="page-link">...</a>
        </li>
        {% endif %}

        <!-- Links to the 5 pages around the current page -->
        {% for i in range(max(1, page - 2), min(last_page, page + 2) + 1) %}
            <li class="page-item {% if i == page %}active{% endif %}">
                <a class="page-link" href="{{ link }}&page={{ i }}">{{ i }}</a>
            </li>
        {% endfor %}

        <!-- If there are pages after the ones currently shown -->
        {% if page + 2 < last_page %}
        <li class="page-item disabled">
            <a class="page-link">...</a>
        </li>
        {% endif %}

        <!-- Link to the next page -->
        <li class="page-item {% if page == last_page %}disabled{% endif %}">
            <a class="page-link" href="{{ link }}&page={{ page + 1 }}" aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
            </a>
        </li>

        <!-- Link to the last page -->
        <li class="page-item {% if page == last_page %}disabled{% endif %}">
            <a class="page-link" href="{{ link }}&page={{ last_page }}" aria-label="Last">
                <span aria-hidden="true">&raquo;&raquo;</span>
            </a>
        </li>
    </ul>
</nav>
{% endif %}
{% endmacro %}
