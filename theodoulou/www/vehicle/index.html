{% extends "templates/web.html" %}

{% macro render_node(node) %}
    <ul>
        {% for name, data in node.items() %}
            <li>
                <a href="/vehicle/node-products?type={{ type }}&vehicle_id={{ vehicle_id }}&node_id={{ data.id }}">{{ name }}</a>
                {% if data.children %}  <!-- If this node has children, render them -->
                    {{ render_node(data.children) }}
                {% endif %}
            </li>
        {% endfor %}
    </ul>
{% endmacro %}

{% block page_content %}
<h1>{{ _('Vehicle') }}</h1>
<div class="container">
    <h2>{{ vehicle.MANUFACTURER }} - {{ vehicle.MODEL }} - {{ vehicle.TYPE }}</h2>
    <div class="row pt-4">
        <div class="col-3">
            <table class="table">
                <tbody>
                    {% for field, value in vehicle.items() %}
                    <tr>
                        <td>{{ field }}</td>
                        <td>{{ value }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="col-9">
            <!-- Render the tree here -->
            {{ render_node(categories_tree) }}
        </div>
    </div>
</div>
{% endblock %}